# ç¬¬ 9 è®² â€” *æ‚é¡¹*ï¼ˆPython é›¶ç¢çŸ¥è¯†ï¼‰

> ä¿æŒä¸å‰é¢è®²ä¹‰ä¸€è‡´çš„é£æ ¼ï¼šå…³é”®æ¦‚å¿µåŠ ç²—ï¼Œè§£é‡Šç”¨*æ–œä½“*ï¼Œé‡è¦æé†’ç”¨<mark>é«˜äº®</mark>ã€‚

## ç›®å½•
- [æ‚é¡¹ Et Cetera](#æ‚é¡¹-et-cetera)
- [set é›†åˆ](#set-é›†åˆ)
- [å…¨å±€å˜é‡](#å…¨å±€å˜é‡)
- [å¸¸é‡](#å¸¸é‡)
- [ç±»å‹æç¤º](#ç±»å‹æç¤º)
- [æ–‡æ¡£å­—ç¬¦ä¸² Docstring](#æ–‡æ¡£å­—ç¬¦ä¸²-docstring)
- [argparse å‘½ä»¤è¡Œå‚æ•°](#argparse-å‘½ä»¤è¡Œå‚æ•°)
- [æ‹†åŒ… Unpacking](#æ‹†åŒ…-unpacking)
- [args ä¸ kwargs](#args-ä¸-kwargs)
- [map æ˜ å°„](#map-æ˜ å°„)
- [åˆ—è¡¨æ¨å¯¼å¼](#åˆ—è¡¨æ¨å¯¼å¼)
- [filter è¿‡æ»¤](#filter-è¿‡æ»¤)
- [å­—å…¸æ¨å¯¼å¼](#å­—å…¸æ¨å¯¼å¼)
- [enumerate æšä¸¾](#enumerate-æšä¸¾)
- [ç”Ÿæˆå™¨ä¸è¿­ä»£å™¨](#ç”Ÿæˆå™¨ä¸è¿­ä»£å™¨)
- [æ­å–œï¼](#æ­å–œ)
- [This was CS50!](#this-was-cs50-1)

---

## æ‚é¡¹ Et Cetera

- ä¹‹å‰è¯¾ç¨‹å·²è¦†ç›–å¤§é‡ Python å†…å®¹ã€‚
- æœ¬è®²èšç„¦æ­¤å‰æœªç»†è®²çš„â€œ*etc.*â€â€”â€”â€œä»¥åŠå…¶å®ƒâ€ã€‚
- åœ¨å®˜æ–¹æ–‡æ¡£é‡Œï¼Œè¿™äº›å°±æ˜¯â€œå‰©ä½™â€çš„æœ‰ç”¨ç‰¹æ€§ã€‚

---

## set é›†åˆ

- **é›†åˆ**è¡¨ç¤ºä¸é‡å¤å…ƒç´ çš„å®¹å™¨ã€‚
- åœ¨æ•°å­¦ä¸­ï¼Œé›†åˆæŒ‡çš„æ˜¯ä¸€ç»„æ²¡æœ‰é‡å¤æ•°å­—çš„æ•°å­—ã€‚


```py
students = [
    {"name": "Hermione", "house": "Gryffindor"},
    {"name": "Harry", "house": "Gryffindor"},
    {"name": "Ron", "house": "Gryffindor"},
    {"name": "Draco", "house": "Slytherin"},
    {"name": "Padma", "house": "Ravenclaw"},
]

houses = []
for student in students:
    if student["house"] not in houses:
        houses.append(student["house"])

for house in sorted(houses):
    print(house)
```
- æ³¨æ„æˆ‘ä»¬æœ‰ä¸€ä¸ªå­—å…¸åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸ä»£è¡¨ä¸€ä¸ªå­¦ç”Ÿã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º houses çš„ç©ºåˆ—è¡¨ã€‚æˆ‘ä»¬éå† students ä¸­çš„æ¯ä¸ª student ã€‚å¦‚æœæŸä¸ªå­¦ç”Ÿçš„ house ä¸åœ¨ houses ä¸­ï¼Œæˆ‘ä»¬å°±å°†å…¶æ·»åŠ åˆ° houses åˆ—è¡¨ä¸­ã€‚
  

- åŸæ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„ set åŠŸèƒ½æ¥æ¶ˆé™¤é‡å¤é¡¹ã€‚
- ä½¿ç”¨ `set` å¯è‡ªåŠ¨å»é‡ï¼š

```py
houses = set()
for student in students:
    houses.add(student["house"])

for house in sorted(houses):
    print(house)
```

- æ‚¨å¯ä»¥åœ¨ Python çš„ set æ–‡æ¡£ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚https://docs.python.org/3/library/stdtypes.html#set

<mark>æ— éœ€è‡ªå·±åˆ¤é‡ï¼Œ`set` è‡ªåŠ¨å®Œæˆã€‚</mark>

---

## å…¨å±€å˜é‡

- å­˜åœ¨å…¨å±€å˜é‡çš„æ¦‚å¿µï¼Œä»»ä½•å‡½æ•°éƒ½å¯ä»¥è®¿é—®è¿™äº›å…¨å±€å˜é‡ã€‚
- Python å…è®¸**å…¨å±€å˜é‡**ï¼Œä½†<mark>åº”å°½é‡å°‘ç”¨</mark>ã€‚

```python
balance = 0


def main():
    print("Balance:", balance)


if __name__ == "__main__":
    main()
```
- æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨ä»»ä½•å‡½æ•°ä¹‹å¤–åˆ›å»ºäº†ä¸€ä¸ªåä¸º balance å…¨å±€å˜é‡ã€‚
- ç”±äºæ‰§è¡Œä¸Šè¿°ä»£ç æ²¡æœ‰å‡ºç°ä»»ä½•é”™è¯¯ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºä¸€åˆ‡æ­£å¸¸ã€‚ç„¶è€Œï¼Œäº‹å®å¹¶éå¦‚æ­¤ï¼



**é”™è¯¯ç¤ºä¾‹ï¼ˆæœªå£°æ˜ global ä¼šè§¦å‘ UnboundLocalErrorï¼‰ï¼š**
```py
balance = 0
def deposit(n):
    balance += n  # é”™
```
- è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç°åœ¨æ·»åŠ äº†å‘ balance å……å€¼å’Œæç°çš„åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œæ‰§è¡Œè¿™æ®µä»£ç æ—¶ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªé”™è¯¯ï¼é”™è¯¯åç§°ä¸º UnboundLocalError ã€‚æ‚¨å¯èƒ½å·²ç»çŒœåˆ°ï¼Œè‡³å°‘åœ¨æˆ‘ä»¬ç›®å‰ç¼–å†™çš„ balance åŠå…¶ deposit å’Œ withdraw å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ— æ³•åœ¨å‡½æ•°å†…éƒ¨é‡æ–°èµ‹å€¼ã€‚


- è¦åœ¨å‡½æ•°å†…éƒ¨æ“ä½œå…¨å±€å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ global å…³é”®å­—ã€‚
**æ­£ç¡®ç¤ºä¾‹ï¼ˆåœ¨å‡½æ•°å†…å£°æ˜ globalï¼‰ï¼š**
```py
balance = 0
def deposit(n):
    global balance
    balance += n
```

- æ³¨æ„ï¼Œ global å…³é”®å­—å‘Šè¯‰æ¯ä¸ªå‡½æ•°ï¼Œ balance æŒ‡çš„ä¸æ˜¯å±€éƒ¨å˜é‡ï¼Œè€Œæ˜¯æˆ‘ä»¬æœ€åˆæ”¾åœ¨ä»£ç é¡¶éƒ¨çš„å…¨å±€å˜é‡ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬çš„ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼



- åˆ©ç”¨æˆ‘ä»¬ä»¥å¾€åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹é¢çš„ç»éªŒï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä»£ç ï¼Œä½¿ç”¨ç±»è€Œä¸æ˜¯å…¨å±€å˜é‡ã€‚
  
- æ›´å¥½çš„åšæ³•ï¼šç”¨ **ç±»** å°è£…çŠ¶æ€ã€‚

```py
class Account:
    def __init__(self):
        self._balance = 0

    @property
    def balance(self):
        return self._balance

    def deposit(self, n):
        self._balance += n

    def withdraw(self, n):
        self._balance -= n


def main():
    account = Account()
    print("Balance:", account.balance)
    account.deposit(100)
    account.withdraw(50)
    print("Balance:", account.balance)


if __name__ == "__main__":
    main()
```
- æ³¨æ„æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ account = Account() æ¥åˆ›å»ºå¸æˆ·ã€‚ç±»å…è®¸æˆ‘ä»¬æ›´ç®€æ´åœ°è§£å†³éœ€è¦å…¨å±€å˜é‡çš„é—®é¢˜ï¼Œå› ä¸ºè¿™äº›å®ä¾‹å˜é‡å¯ä»¥é€šè¿‡ self è¢«è¯¥ç±»çš„æ‰€æœ‰æ–¹æ³•è®¿é—®ã€‚

- ä¸€èˆ¬æ¥è¯´ï¼Œå…¨å±€å˜é‡åº”è¯¥å°½é‡å°‘ç”¨ï¼Œæœ€å¥½æ˜¯å®Œå…¨ä¸ç”¨ï¼

---

## å¸¸é‡

- æœ‰äº›ç¼–ç¨‹è¯­è¨€å…è®¸ä½ åˆ›å»ºä¸å¯æ›´æ”¹çš„å˜é‡ï¼Œç§°ä¸ºâ€œå¸¸é‡â€ã€‚å¸¸é‡å…è®¸ä½ è¿›è¡Œé˜²å¾¡æ€§ç¼–ç¨‹ï¼Œå¹¶å‡å°‘é‡è¦å€¼è¢«ç¯¡æ”¹çš„å¯èƒ½æ€§ã€‚
  
- Python ä¸å¼ºåˆ¶å¸¸é‡ï¼Œä½†**å…¨å¤§å†™**å˜é‡å + *è‡ªè§‰ä¸æ”¹* æ˜¯é€šç”¨çº¦å®šï¼š

```py
MEOWS = 3
for _ in range(MEOWS):
    print("meow")
```
- æ³¨æ„ï¼Œ MEOWS åœ¨æœ¬ä¾‹ä¸­æ˜¯å¸¸é‡ã€‚å¸¸é‡é€šå¸¸ç”¨å¤§å†™å­—æ¯å‘½åï¼Œå¹¶æ”¾åœ¨ä»£ç é¡¶éƒ¨ã€‚è™½ç„¶å®ƒçœ‹èµ·æ¥åƒä¸ªå¸¸é‡ï¼Œä½†å®é™…ä¸Šï¼ŒPython å¹¶æ²¡æœ‰æœºåˆ¶é˜»æ­¢æˆ‘ä»¬åœ¨ä»£ç ä¸­ä¿®æ”¹å®ƒçš„å€¼ï¼æ‰€ä»¥ï¼Œä¸€åˆ‡éƒ½å–å†³äºä½ çš„è‡ªè§‰æ€§ï¼šå¦‚æœå˜é‡åå…¨éƒ¨å¤§å†™ï¼Œå°±ä¸è¦ä¿®æ”¹å®ƒï¼
  

- æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸ºâ€œconstantâ€çš„ç±»ï¼Œè¿™é‡Œéœ€è¦åŠ å¼•å·ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“ Python å¹¶ä¸å®Œå…¨æ”¯æŒâ€œå¸¸é‡â€è¿™ç§ç±»å‹ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š
- ç±»â€œå¸¸é‡â€ï¼š
```py
class Cat:
    MEOWS = 3
    def meow(self):
        for _ in range(Cat.MEOWS):
            print("meow")

cat = Cat()
cat.meow()
```
- å› ä¸º MEOWS æ˜¯åœ¨ä»»ä½•ç‰¹å®šç±»æ–¹æ³•ä¹‹å¤–å®šä¹‰çš„ï¼Œæ‰€ä»¥æ‰€æœ‰ç±»æ–¹æ³•éƒ½å¯ä»¥é€šè¿‡ Cat.MEOWS è®¿é—®è¯¥å€¼ã€‚

---

## ç±»å‹æç¤º

- åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œéœ€è¦æ˜ç¡®æŒ‡å®šè¦ä½¿ç”¨çš„å˜é‡ç±»å‹ã€‚
- æ­£å¦‚æˆ‘ä»¬åœ¨è¯¾ç¨‹å‰é¢çœ‹åˆ°çš„ï¼ŒPython ä¸éœ€è¦æ˜¾å¼å£°æ˜ç±»å‹ã€‚
- ç„¶è€Œï¼Œç¡®ä¿æ‰€æœ‰å˜é‡çš„ç±»å‹éƒ½æ­£ç¡®æ˜¯è‰¯å¥½åšæ³•ã€‚
- mypy æ˜¯ä¸€ä¸ªå¯ä»¥å¸®åŠ©ä½ è¿›è¡Œæµ‹è¯•çš„ç¨‹åºï¼Œä»¥ç¡®ä¿ä½ çš„æ‰€æœ‰å˜é‡éƒ½æ˜¯æ­£ç¡®çš„ç±»å‹ã€‚


  

- å®‰è£… `mypy`ï¼š`pip install mypy`ã€‚
- ä¸ºå˜é‡ä¸è¿”å›å€¼æ·»åŠ ç±»å‹ï¼Œ<mark>æå‰å‘ç°é—®é¢˜</mark>ï¼š


```python
  def meow(n):
      for _ in range(n):
          print("meow")


  number = input("Number: ")
  meow(number)
```
- ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ° number = input("Number: )" è¿”å›çš„æ˜¯ä¸€ä¸ª string ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª int ã€‚ä½†æ˜¯ meow å¯èƒ½éœ€è¦ä¸€ä¸ª int ï¼



- å¯ä»¥æ·»åŠ ç±»å‹æç¤ºï¼Œå‘Šè¯‰ Python å˜é‡ meow åº”è¯¥æ¥å—ä»€ä¹ˆç±»å‹çš„å˜é‡ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š
- å®‰è£… mypy åï¼Œåœ¨ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œ mypy meows.py mypy æä¾›ä¸€äº›å…³äºå¦‚ä½•ä¿®å¤æ­¤é”™è¯¯çš„æŒ‡å¯¼ã€‚
- æ‚¨å¯ä»¥ä¸ºæ‰€æœ‰å˜é‡æ·»åŠ æ³¨é‡Šã€‚
```py
def meow(n: int) -> None:
    for _ in range(n):
        print("meow")

number: int = int(input("Number: "))
meow(number)
```
- æ³¨æ„ï¼Œç°åœ¨ number æœ‰äº†ç±»å‹æç¤ºã€‚
- åŒæ ·ï¼Œåœ¨ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œ mypy meows.py å¯ä»¥ä¸ºç¨‹åºå‘˜æä¾›æ›´å…·ä½“çš„åé¦ˆã€‚
- æ³¨æ„ï¼Œç°åœ¨è¿è¡Œ mypy ä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯ï¼Œå› ä¸ºæˆ‘ä»¬å°†è¾“å…¥å¼ºåˆ¶è½¬æ¢ä¸ºæ•´æ•°ã€‚






- æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ–°çš„é”™è¯¯ï¼Œå‡è®¾ meow ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆ` str ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š

- æˆ–è¿”å›å­—ç¬¦ä¸²ï¼š
```python
def meow(n: int):
    for _ in range(n):
        print("meow")


number: int = int(input("Number: "))
meows: str = meow(number)
print(meows)
```
- æ³¨æ„ meow å‡½æ•°åªæœ‰å‰¯ä½œç”¨ã€‚å› ä¸ºæˆ‘ä»¬åªå°è¯•æ‰“å°â€œmeowâ€ï¼Œè€Œä¸è¿”å›å€¼ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬å°è¯•å°† meow çš„è¿”å›å€¼å­˜å‚¨åˆ° meows ä¸­æ—¶ä¼šæŠ›å‡ºé”™è¯¯ã€‚


- æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç±»å‹æç¤ºæ¥æ£€æŸ¥é”™è¯¯ï¼Œè¿™æ¬¡æ˜¯å¯¹å‡½æ•°çš„è¿”å›å€¼è¿›è¡Œæ ‡æ³¨ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š

```python
def meow(n: int) -> None:
    for _ in range(n):
        print("meow")


number: int = int(input("Number: "))
meows: str = meow(number)
print(meows)
```
- æ³¨æ„ -> None è¡¨ç¤ºæ³•å‘Šè¯‰ mypy æ²¡æœ‰è¿”å›å€¼ã€‚


- æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ä»£ç ï¼Œä½¿å…¶è¿”å›å­—ç¬¦ä¸²ï¼š
```py
def meow(n: int) -> str:
    return "meow\n" * n


number: int = int(input("Number: "))
meows: str = meow(number)
print(meows, end="")
```
- æ³¨æ„æˆ‘ä»¬åœ¨ meows ä¸­æ˜¯å¦‚ä½•å­˜å‚¨å¤šä¸ª str çš„ã€‚è¿è¡Œ mypy æ²¡æœ‰äº§ç”Ÿä»»ä½•é”™è¯¯ã€‚


- æ‚¨å¯ä»¥åœ¨ Python çš„ç±»å‹æç¤ºæ–‡æ¡£ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚ https://docs.python.org/3/library/typing.html
- æ‚¨å¯ä»¥é€šè¿‡ mypy ç¨‹åºè‡ªèº«çš„æ–‡æ¡£äº†è§£æ›´å¤šå…³äºè¯¥ç¨‹åºçš„ä¿¡æ¯ã€‚ https://mypy.readthedocs.io/


---

## æ–‡æ¡£å­—ç¬¦ä¸² Docstring

```py
def meow(n: int) -> str:
    """Meow n æ¬¡ã€‚

    :param n: æ¬¡æ•°
    :type n: int
    :return: n è¡Œ meow
    :rtype: str
    """
    return "meow\n" * n
```
<mark>å¯ç”¨ Sphinx ç”Ÿæˆ HTML/PDF æ–‡æ¡£ã€‚</mark>

---

## argparse å‘½ä»¤è¡Œå‚æ•°

```py
import argparse
parser = argparse.ArgumentParser(description="åƒçŒ«ä¸€æ ·å–µå«")
parser.add_argument("-n", default=1, help="å–µå«æ¬¡æ•°", type=int)
args = parser.parse_args()
for _ in range(args.n):
    print("meow")
```

---

## æ‹†åŒ… Unpacking

```py
first, _ = input("What's your name? ").split(" ")
print(f"hello, {first}")
```

```py
def total(galleons, sickles, knuts):
    return (galleons * 17 + sickles) * 29 + knuts

print(total(*[100, 50, 25]), "Knuts")
print(total(**{"galleons":100, "sickles":50, "knuts":25}), "Knuts")
```

---

## args ä¸ kwargs

```py
def f(*args, **kwargs):
    print("ä½ç½®å‚æ•°:", args)
    print("å‘½åå‚æ•°:", kwargs)

f(100, 50, 25, galleons=100, sickles=50, knuts=25)
```

---

## map æ˜ å°„

```py
words = ["This", "is", "CS50"]
uppercased = list(map(str.upper, words))
print(uppercased)
```

---

## åˆ—è¡¨æ¨å¯¼å¼

```py
words = ["This", "is", "CS50"]
uppercased = [w.upper() for w in words]
```

ç­›é€‰ï¼š
```py
students = [
    {"name": "Hermione", "house": "Gryffindor"},
    {"name": "Harry", "house": "Gryffindor"},
    {"name": "Ron", "house": "Gryffindor"},
    {"name": "Draco", "house": "Slytherin"},
]
gryffindors = [s["name"] for s in students if s["house"] == "Gryffindor"]
```

---

## filter è¿‡æ»¤

```py
def is_gryffindor(s): return s["house"] == "Gryffindor"
gryffindors = filter(is_gryffindor, students)
for g in sorted(gryffindors, key=lambda s: s["name"]):
    print(g["name"])
```

---

## å­—å…¸æ¨å¯¼å¼

```py
students = ["Hermione", "Harry", "Ron"]
gryffindors = [{"name": s, "house": "Gryffindor"} for s in students]
mapping = {s: "Gryffindor" for s in students}
```

---

## enumerate æšä¸¾

```py
for i, s in enumerate(["Hermione", "Harry", "Ron"], start=1):
    print(i, s)
```

---

## ç”Ÿæˆå™¨ä¸è¿­ä»£å™¨

- **ç”Ÿæˆå™¨**é€šè¿‡ `yield` é€ä¸ªäº§ç”Ÿå€¼ï¼Œ<mark>å†…å­˜å ç”¨æ’å®š</mark>ã€‚

```py
def sheep(n):
    for i in range(n):
        yield "ğŸ‘" * i

def main():
    n = int(input("what's n? "))
    for s in sheep(n):
        print(s)
```

---

## æ­å–œï¼

ä½ å·²æŒæ¡ï¼šå‡½æ•°ä¸å˜é‡ã€æ¡ä»¶ã€å¾ªç¯ã€å¼‚å¸¸ã€åº“ã€å•å…ƒæµ‹è¯•ã€æ–‡ä»¶ I/Oã€æ­£åˆ™è¡¨è¾¾å¼ã€é¢å‘å¯¹è±¡ï¼Œä»¥åŠæœ¬è®²çš„ä¸€ç³»åˆ—å®ç”¨å·¥å…·ï¼ˆé›†åˆã€ç±»å‹ã€è§£æã€ç”Ÿæˆå™¨ç­‰ï¼‰ã€‚

---

## This was CS50!

```py
import cowsay
import pyttsx3

engine = pyttsx3.init()
this = input("what's this? ")
cowsay.cow(this)
engine.say(this)
engine.runAndWait()
```

> æœŸå¾…ä½ æŠŠè¿™äº›çŸ¥è¯†ç”¨äºè§£å†³çœŸå®é—®é¢˜ï¼Œè®©ä¸–ç•Œæ›´å¥½ã€‚**This was CS50!**
