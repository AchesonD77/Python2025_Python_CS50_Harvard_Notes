# ç¬¬ 9 è®² â€” *æ‚é¡¹*ï¼ˆPython é›¶ç¢çŸ¥è¯†ï¼‰

> ä¿æŒä¸å‰é¢è®²ä¹‰ä¸€è‡´çš„é£æ ¼ï¼šå…³é”®æ¦‚å¿µåŠ ç²—ï¼Œè§£é‡Šç”¨*æ–œä½“*ï¼Œé‡è¦æé†’ç”¨<mark>é«˜äº®</mark>ã€‚

## ç›®å½•
- [æ‚é¡¹ Et Cetera](#æ‚é¡¹-et-cetera)
- [set é›†åˆ](#set-é›†åˆ)
- [å…¨å±€å˜é‡](#å…¨å±€å˜é‡)
- [å¸¸é‡](#å¸¸é‡)
- [ç±»å‹æç¤º](#ç±»å‹æç¤º)
- [æ–‡æ¡£å­—ç¬¦ä¸² Docstring](#æ–‡æ¡£å­—ç¬¦ä¸²-docstring)
- [argparse å‘½ä»¤è¡Œå‚æ•°](#argparse-å‘½ä»¤è¡Œå‚æ•°)
- [æ‹†åŒ… Unpacking](#æ‹†åŒ…-unpacking)
- [args ä¸ kwargs](#args-ä¸-kwargs)
- [map æ˜ å°„](#map-æ˜ å°„)
- [åˆ—è¡¨æ¨å¯¼å¼](#åˆ—è¡¨æ¨å¯¼å¼)
- [filter è¿‡æ»¤](#filter-è¿‡æ»¤)
- [å­—å…¸æ¨å¯¼å¼](#å­—å…¸æ¨å¯¼å¼)
- [enumerate æšä¸¾](#enumerate-æšä¸¾)
- [ç”Ÿæˆå™¨ä¸è¿­ä»£å™¨](#ç”Ÿæˆå™¨ä¸è¿­ä»£å™¨)
- [æ­å–œï¼](#æ­å–œ)
- [This was CS50!](#this-was-cs50-1)

---

## æ‚é¡¹ Et Cetera

- ä¹‹å‰è¯¾ç¨‹å·²è¦†ç›–å¤§é‡ Python å†…å®¹ã€‚
- æœ¬è®²èšç„¦æ­¤å‰æœªç»†è®²çš„â€œ*etc.*â€â€”â€”â€œä»¥åŠå…¶å®ƒâ€ã€‚
- åœ¨å®˜æ–¹æ–‡æ¡£é‡Œï¼Œè¿™äº›å°±æ˜¯â€œå‰©ä½™â€çš„æœ‰ç”¨ç‰¹æ€§ã€‚

---

## set é›†åˆ

- **é›†åˆ**è¡¨ç¤ºä¸é‡å¤å…ƒç´ çš„å®¹å™¨ã€‚
- åœ¨æ•°å­¦ä¸­ï¼Œé›†åˆæŒ‡çš„æ˜¯ä¸€ç»„æ²¡æœ‰é‡å¤æ•°å­—çš„æ•°å­—ã€‚


```py
students = [
    {"name": "Hermione", "house": "Gryffindor"},
    {"name": "Harry", "house": "Gryffindor"},
    {"name": "Ron", "house": "Gryffindor"},
    {"name": "Draco", "house": "Slytherin"},
    {"name": "Padma", "house": "Ravenclaw"},
]

houses = []
for student in students:
    if student["house"] not in houses:
        houses.append(student["house"])

for house in sorted(houses):
    print(house)
```
- æ³¨æ„æˆ‘ä»¬æœ‰ä¸€ä¸ªå­—å…¸åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸ä»£è¡¨ä¸€ä¸ªå­¦ç”Ÿã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º houses çš„ç©ºåˆ—è¡¨ã€‚æˆ‘ä»¬éå† students ä¸­çš„æ¯ä¸ª student ã€‚å¦‚æœæŸä¸ªå­¦ç”Ÿçš„ house ä¸åœ¨ houses ä¸­ï¼Œæˆ‘ä»¬å°±å°†å…¶æ·»åŠ åˆ° houses åˆ—è¡¨ä¸­ã€‚
  

- åŸæ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„ set åŠŸèƒ½æ¥æ¶ˆé™¤é‡å¤é¡¹ã€‚
- ä½¿ç”¨ `set` å¯è‡ªåŠ¨å»é‡ï¼š

```py
houses = set()
for student in students:
    houses.add(student["house"])

for house in sorted(houses):
    print(house)
```

- æ‚¨å¯ä»¥åœ¨ Python çš„ set æ–‡æ¡£ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚https://docs.python.org/3/library/stdtypes.html#set

<mark>æ— éœ€è‡ªå·±åˆ¤é‡ï¼Œ`set` è‡ªåŠ¨å®Œæˆã€‚</mark>

---

## å…¨å±€å˜é‡

- å­˜åœ¨å…¨å±€å˜é‡çš„æ¦‚å¿µï¼Œä»»ä½•å‡½æ•°éƒ½å¯ä»¥è®¿é—®è¿™äº›å…¨å±€å˜é‡ã€‚
- Python å…è®¸**å…¨å±€å˜é‡**ï¼Œä½†<mark>åº”å°½é‡å°‘ç”¨</mark>ã€‚

```python
balance = 0


def main():
    print("Balance:", balance)


if __name__ == "__main__":
    main()
```
- æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨ä»»ä½•å‡½æ•°ä¹‹å¤–åˆ›å»ºäº†ä¸€ä¸ªåä¸º balance å…¨å±€å˜é‡ã€‚
- ç”±äºæ‰§è¡Œä¸Šè¿°ä»£ç æ²¡æœ‰å‡ºç°ä»»ä½•é”™è¯¯ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºä¸€åˆ‡æ­£å¸¸ã€‚ç„¶è€Œï¼Œäº‹å®å¹¶éå¦‚æ­¤ï¼



**é”™è¯¯ç¤ºä¾‹ï¼ˆæœªå£°æ˜ global ä¼šè§¦å‘ UnboundLocalErrorï¼‰ï¼š**
```py
balance = 0
def deposit(n):
    balance += n  # é”™
```
- è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç°åœ¨æ·»åŠ äº†å‘ balance å……å€¼å’Œæç°çš„åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œæ‰§è¡Œè¿™æ®µä»£ç æ—¶ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªé”™è¯¯ï¼é”™è¯¯åç§°ä¸º UnboundLocalError ã€‚æ‚¨å¯èƒ½å·²ç»çŒœåˆ°ï¼Œè‡³å°‘åœ¨æˆ‘ä»¬ç›®å‰ç¼–å†™çš„ balance åŠå…¶ deposit å’Œ withdraw å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ— æ³•åœ¨å‡½æ•°å†…éƒ¨é‡æ–°èµ‹å€¼ã€‚


- è¦åœ¨å‡½æ•°å†…éƒ¨æ“ä½œå…¨å±€å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ global å…³é”®å­—ã€‚
**æ­£ç¡®ç¤ºä¾‹ï¼ˆåœ¨å‡½æ•°å†…å£°æ˜ globalï¼‰ï¼š**
```py
balance = 0
def deposit(n):
    global balance
    balance += n
```

- æ³¨æ„ï¼Œ global å…³é”®å­—å‘Šè¯‰æ¯ä¸ªå‡½æ•°ï¼Œ balance æŒ‡çš„ä¸æ˜¯å±€éƒ¨å˜é‡ï¼Œè€Œæ˜¯æˆ‘ä»¬æœ€åˆæ”¾åœ¨ä»£ç é¡¶éƒ¨çš„å…¨å±€å˜é‡ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬çš„ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼



- åˆ©ç”¨æˆ‘ä»¬ä»¥å¾€åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹é¢çš„ç»éªŒï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä»£ç ï¼Œä½¿ç”¨ç±»è€Œä¸æ˜¯å…¨å±€å˜é‡ã€‚
  
- æ›´å¥½çš„åšæ³•ï¼šç”¨ **ç±»** å°è£…çŠ¶æ€ã€‚

```py
class Account:
    def __init__(self):
        self._balance = 0

    @property
    def balance(self):
        return self._balance

    def deposit(self, n):
        self._balance += n

    def withdraw(self, n):
        self._balance -= n


def main():
    account = Account()
    print("Balance:", account.balance)
    account.deposit(100)
    account.withdraw(50)
    print("Balance:", account.balance)


if __name__ == "__main__":
    main()
```
- æ³¨æ„æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ account = Account() æ¥åˆ›å»ºå¸æˆ·ã€‚ç±»å…è®¸æˆ‘ä»¬æ›´ç®€æ´åœ°è§£å†³éœ€è¦å…¨å±€å˜é‡çš„é—®é¢˜ï¼Œå› ä¸ºè¿™äº›å®ä¾‹å˜é‡å¯ä»¥é€šè¿‡ self è¢«è¯¥ç±»çš„æ‰€æœ‰æ–¹æ³•è®¿é—®ã€‚

- ä¸€èˆ¬æ¥è¯´ï¼Œå…¨å±€å˜é‡åº”è¯¥å°½é‡å°‘ç”¨ï¼Œæœ€å¥½æ˜¯å®Œå…¨ä¸ç”¨ï¼

---

## å¸¸é‡

- æœ‰äº›ç¼–ç¨‹è¯­è¨€å…è®¸ä½ åˆ›å»ºä¸å¯æ›´æ”¹çš„å˜é‡ï¼Œç§°ä¸ºâ€œå¸¸é‡â€ã€‚å¸¸é‡å…è®¸ä½ è¿›è¡Œé˜²å¾¡æ€§ç¼–ç¨‹ï¼Œå¹¶å‡å°‘é‡è¦å€¼è¢«ç¯¡æ”¹çš„å¯èƒ½æ€§ã€‚
  
- Python ä¸å¼ºåˆ¶å¸¸é‡ï¼Œä½†**å…¨å¤§å†™**å˜é‡å + *è‡ªè§‰ä¸æ”¹* æ˜¯é€šç”¨çº¦å®šï¼š

```py
MEOWS = 3
for _ in range(MEOWS):
    print("meow")
```
- æ³¨æ„ï¼Œ MEOWS åœ¨æœ¬ä¾‹ä¸­æ˜¯å¸¸é‡ã€‚å¸¸é‡é€šå¸¸ç”¨å¤§å†™å­—æ¯å‘½åï¼Œå¹¶æ”¾åœ¨ä»£ç é¡¶éƒ¨ã€‚è™½ç„¶å®ƒçœ‹èµ·æ¥åƒä¸ªå¸¸é‡ï¼Œä½†å®é™…ä¸Šï¼ŒPython å¹¶æ²¡æœ‰æœºåˆ¶é˜»æ­¢æˆ‘ä»¬åœ¨ä»£ç ä¸­ä¿®æ”¹å®ƒçš„å€¼ï¼æ‰€ä»¥ï¼Œä¸€åˆ‡éƒ½å–å†³äºä½ çš„è‡ªè§‰æ€§ï¼šå¦‚æœå˜é‡åå…¨éƒ¨å¤§å†™ï¼Œå°±ä¸è¦ä¿®æ”¹å®ƒï¼
  

- æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸ºâ€œconstantâ€çš„ç±»ï¼Œè¿™é‡Œéœ€è¦åŠ å¼•å·ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“ Python å¹¶ä¸å®Œå…¨æ”¯æŒâ€œå¸¸é‡â€è¿™ç§ç±»å‹ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š
- ç±»â€œå¸¸é‡â€ï¼š
```py
class Cat:
    MEOWS = 3
    def meow(self):
        for _ in range(Cat.MEOWS):
            print("meow")

cat = Cat()
cat.meow()
```
- å› ä¸º MEOWS æ˜¯åœ¨ä»»ä½•ç‰¹å®šç±»æ–¹æ³•ä¹‹å¤–å®šä¹‰çš„ï¼Œæ‰€ä»¥æ‰€æœ‰ç±»æ–¹æ³•éƒ½å¯ä»¥é€šè¿‡ Cat.MEOWS è®¿é—®è¯¥å€¼ã€‚

---

## ç±»å‹æç¤º

- åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œéœ€è¦æ˜ç¡®æŒ‡å®šè¦ä½¿ç”¨çš„å˜é‡ç±»å‹ã€‚
- æ­£å¦‚æˆ‘ä»¬åœ¨è¯¾ç¨‹å‰é¢çœ‹åˆ°çš„ï¼ŒPython ä¸éœ€è¦æ˜¾å¼å£°æ˜ç±»å‹ã€‚
- ç„¶è€Œï¼Œç¡®ä¿æ‰€æœ‰å˜é‡çš„ç±»å‹éƒ½æ­£ç¡®æ˜¯è‰¯å¥½åšæ³•ã€‚
- mypy æ˜¯ä¸€ä¸ªå¯ä»¥å¸®åŠ©ä½ è¿›è¡Œæµ‹è¯•çš„ç¨‹åºï¼Œä»¥ç¡®ä¿ä½ çš„æ‰€æœ‰å˜é‡éƒ½æ˜¯æ­£ç¡®çš„ç±»å‹ã€‚


  

- å®‰è£… `mypy`ï¼š`pip install mypy`ã€‚
- ä¸ºå˜é‡ä¸è¿”å›å€¼æ·»åŠ ç±»å‹ï¼Œ<mark>æå‰å‘ç°é—®é¢˜</mark>ï¼š


```python
  def meow(n):
      for _ in range(n):
          print("meow")


  number = input("Number: ")
  meow(number)
```
- ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ° number = input("Number: )" è¿”å›çš„æ˜¯ä¸€ä¸ª string ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª int ã€‚ä½†æ˜¯ meow å¯èƒ½éœ€è¦ä¸€ä¸ª int ï¼



- å¯ä»¥æ·»åŠ ç±»å‹æç¤ºï¼Œå‘Šè¯‰ Python å˜é‡ meow åº”è¯¥æ¥å—ä»€ä¹ˆç±»å‹çš„å˜é‡ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š
- å®‰è£… mypy åï¼Œåœ¨ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œ mypy meows.py mypy æä¾›ä¸€äº›å…³äºå¦‚ä½•ä¿®å¤æ­¤é”™è¯¯çš„æŒ‡å¯¼ã€‚
- æ‚¨å¯ä»¥ä¸ºæ‰€æœ‰å˜é‡æ·»åŠ æ³¨é‡Šã€‚
```py
def meow(n: int) -> None:
    for _ in range(n):
        print("meow")

number: int = int(input("Number: "))
meow(number)
```
- æ³¨æ„ï¼Œç°åœ¨ number æœ‰äº†ç±»å‹æç¤ºã€‚
- åŒæ ·ï¼Œåœ¨ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œ mypy meows.py å¯ä»¥ä¸ºç¨‹åºå‘˜æä¾›æ›´å…·ä½“çš„åé¦ˆã€‚
- æ³¨æ„ï¼Œç°åœ¨è¿è¡Œ mypy ä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯ï¼Œå› ä¸ºæˆ‘ä»¬å°†è¾“å…¥å¼ºåˆ¶è½¬æ¢ä¸ºæ•´æ•°ã€‚






- æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ–°çš„é”™è¯¯ï¼Œå‡è®¾ meow ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆ` str ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š

- æˆ–è¿”å›å­—ç¬¦ä¸²ï¼š
```python
def meow(n: int):
    for _ in range(n):
        print("meow")


number: int = int(input("Number: "))
meows: str = meow(number)
print(meows)
```
- æ³¨æ„ meow å‡½æ•°åªæœ‰å‰¯ä½œç”¨ã€‚å› ä¸ºæˆ‘ä»¬åªå°è¯•æ‰“å°â€œmeowâ€ï¼Œè€Œä¸è¿”å›å€¼ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬å°è¯•å°† meow çš„è¿”å›å€¼å­˜å‚¨åˆ° meows ä¸­æ—¶ä¼šæŠ›å‡ºé”™è¯¯ã€‚


- æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç±»å‹æç¤ºæ¥æ£€æŸ¥é”™è¯¯ï¼Œè¿™æ¬¡æ˜¯å¯¹å‡½æ•°çš„è¿”å›å€¼è¿›è¡Œæ ‡æ³¨ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š

```python
def meow(n: int) -> None:
    for _ in range(n):
        print("meow")


number: int = int(input("Number: "))
meows: str = meow(number)
print(meows)
```
- æ³¨æ„ -> None è¡¨ç¤ºæ³•å‘Šè¯‰ mypy æ²¡æœ‰è¿”å›å€¼ã€‚


- æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ä»£ç ï¼Œä½¿å…¶è¿”å›å­—ç¬¦ä¸²ï¼š
```py
def meow(n: int) -> str:
    return "meow\n" * n


number: int = int(input("Number: "))
meows: str = meow(number)
print(meows, end="")
```
- æ³¨æ„æˆ‘ä»¬åœ¨ meows ä¸­æ˜¯å¦‚ä½•å­˜å‚¨å¤šä¸ª str çš„ã€‚è¿è¡Œ mypy æ²¡æœ‰äº§ç”Ÿä»»ä½•é”™è¯¯ã€‚


- æ‚¨å¯ä»¥åœ¨ Python çš„ç±»å‹æç¤ºæ–‡æ¡£ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚ https://docs.python.org/3/library/typing.html
- æ‚¨å¯ä»¥é€šè¿‡ mypy ç¨‹åºè‡ªèº«çš„æ–‡æ¡£äº†è§£æ›´å¤šå…³äºè¯¥ç¨‹åºçš„ä¿¡æ¯ã€‚ https://mypy.readthedocs.io/


---

## æ–‡æ¡£å­—ç¬¦ä¸² Docstring
- æ³¨é‡Šå‡½æ•°ç”¨é€”çš„æ ‡å‡†æ–¹æ³•æ˜¯ä½¿ç”¨æ–‡æ¡£å­—ç¬¦ä¸² (docstring)ã€‚

- æ³¨æ„è¿™ä¸‰ä¸ªåŒå¼•å·æ˜¯å¦‚ä½•è¡¨ç¤ºå‡½æ•°çš„åŠŸèƒ½çš„ã€‚
- æ‚¨å¯ä»¥ä½¿ç”¨æ–‡æ¡£å­—ç¬¦ä¸²æ¥è§„èŒƒå‡½æ•°ç‰¹æ€§çš„æ–‡æ¡£ç¼–å†™æ–¹å¼ã€‚

```py
def meow(n: int) -> str:
    """Meow n æ¬¡ã€‚

    :param n: æ¬¡æ•°
    :type n: int
    :return: n è¡Œ meow
    :rtype: str
    """
    return "meow\n" * n
```

- è¯·æ³¨æ„ï¼Œæ–‡æ¡£å­—ç¬¦ä¸²ä¸­åŒ…å«äº†å¤šä¸ªå‚æ•°ã€‚ä¾‹å¦‚ï¼Œå®ƒæè¿°äº†å‡½æ•°æ¥å—çš„å‚æ•°ä»¥åŠå‡½æ•°çš„è¿”å›å€¼ã€‚
- æ‚¨å¯ä»¥åœ¨ Python çš„æ–‡æ¡£å­—ç¬¦ä¸²ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚ https://peps.python.org/pep-0257/

<mark>å¯ç”¨ Sphinx ç”Ÿæˆ HTML/PDF æ–‡æ¡£ã€‚</mark>

---

## argparse å‘½ä»¤è¡Œå‚æ•°
- å‡è®¾æˆ‘ä»¬æƒ³åœ¨ç¨‹åºä¸­ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ã€‚
```python
import sys

if len(sys.argv) == 1:
    print("meow")
elif len(sys.argv) == 3 and sys.argv[1] == "-n":
    n = int(sys.argv[2])
    for _ in range(n):
        print("meow")
else:
    print("usage: meows.py [-n NUMBER]")
```
- æ³¨æ„ sys æ˜¯å¦‚ä½•å¯¼å…¥çš„ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥è®¿é—® sys.argv ï¼Œè¿™æ˜¯ä¸€ä¸ªå­˜å‚¨ç¨‹åºè¿è¡Œæ—¶ä¼ é€’ç»™ç”¨æˆ·çš„å‘½ä»¤è¡Œå‚æ•°çš„æ•°ç»„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ª if è¯­å¥æ¥æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ­£ç¡®è¿è¡Œäº†æˆ‘ä»¬çš„ç¨‹åºã€‚
- å‡è®¾è¿™ä¸ªç¨‹åºä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚æˆ‘ä»¬è¯¥å¦‚ä½•æ£€æŸ¥ç”¨æˆ·å¯èƒ½è¾“å…¥çš„æ‰€æœ‰å‚æ•°å‘¢ï¼Ÿå¦‚æœå‘½ä»¤è¡Œå‚æ•°è¶…è¿‡å‡ ä¸ªï¼Œæˆ‘ä»¬å¯èƒ½å°±åªèƒ½æ”¾å¼ƒäº†ï¼


- å¹¸è¿çš„æ˜¯ï¼Œ argparse åº“å¯ä»¥å¤„ç†æ‰€æœ‰å¤æ‚çš„å‘½ä»¤è¡Œå‚æ•°å­—ç¬¦ä¸²çš„è§£æå·¥ä½œã€‚



```py
import argparse
parser = argparse.ArgumentParser(description="åƒçŒ«ä¸€æ ·å–µå«")
parser.add_argument("-n", default=1, help="å–µå«æ¬¡æ•°", type=int)
args = parser.parse_args()
for _ in range(args.n):
    print("meow")
```
- æ³¨æ„è¿™é‡Œå¯¼å…¥çš„æ˜¯ argparse è€Œä¸æ˜¯ sys ã€‚ä¸€ä¸ªåä¸º parser å¯¹è±¡ç”± ArgumentParser ç±»åˆ›å»ºã€‚è¯¥ç±»çš„ add_argument æ–¹æ³•ç”¨äºå‘Šè¯‰ argparse å½“ç”¨æˆ·è¿è¡Œç¨‹åºæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æœŸæœ›æ”¶åˆ°å“ªäº›å‚æ•°ã€‚æœ€åï¼Œè¿è¡Œ parser çš„ parse_args æ–¹æ³•æ¥ç¡®ä¿ç”¨æˆ·å·²æ­£ç¡®åŒ…å«æ‰€æœ‰å‚æ•°ã€‚

- è¯·æ³¨æ„ï¼Œè¿™é‡Œä¸ºç”¨æˆ·æä¾›äº†ä¸€äº›æ–‡æ¡£ã€‚å…·ä½“æ¥è¯´ï¼Œæä¾›äº†ä¸€ä¸ª help å‚æ•°ã€‚ç°åœ¨ï¼Œå¦‚æœç”¨æˆ·æ‰§è¡Œ python meows.py --help æˆ– -h ï¼Œå°±ä¼šçœ‹åˆ°ä¸€äº›å…³äºå¦‚ä½•ä½¿ç”¨æ­¤ç¨‹åºçš„æç¤ºã€‚

- è¯·æ³¨æ„ï¼Œä¸ä»…åŒ…å«å¸®åŠ©æ–‡æ¡£ï¼Œè€Œä¸”å½“ç”¨æˆ·æœªæä¾›ä»»ä½•å‚æ•°æ—¶ï¼Œæ‚¨è¿˜å¯ä»¥æä¾› default å€¼ã€‚

- è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¯é€‰çš„å‚æ•° -n æ¥æŒ‡å®šé‡å¤æ¬¡æ•°ã€‚å¦‚æœç”¨æˆ·ä¸æä¾›å‚æ•°ï¼Œç¨‹åºé»˜è®¤æ‰“å°ä¸€æ¬¡ "meow"ï¼›å¦‚æœç”¨æˆ·æŒ‡å®šäº† -n Nï¼Œç¨‹åºå°±ä¼šæ‰“å° N æ¬¡ "meow"ã€‚
  

- æ‚¨å¯ä»¥åœ¨ Python çš„ argparse æ–‡æ¡£ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚ https://docs.python.org/3/library/argparse.html


---

## æ‹†åŒ… Unpacking

- å¦‚æœèƒ½æŠŠä¸€ä¸ªå˜é‡æ‹†åˆ†æˆä¸¤ä¸ªå˜é‡å²‚ä¸æ˜¯å¾ˆå¥½ï¼Ÿåœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š

```py
first, _ = input("What's your name? ").split(" ")
print(f"hello, {first}")
```
- è¯·æ³¨æ„ï¼Œè¯¥ç¨‹åºè¯•å›¾é€šè¿‡ç®€å•åœ°ä»¥å•ä¸ªç©ºæ ¼åˆ†å‰²æ¥è·å–ç”¨æˆ·çš„åå­—ã€‚


- å¦‚æœæˆ‘ä»¬æƒ³æŠŠç¡¬å¸å­˜å‚¨åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­å‘¢ï¼Ÿ
- ä¸ºäº†èƒ½å¤Ÿä¼ é€’æ•´ä¸ªåˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è§£åŒ…åŠŸèƒ½ã€‚

```python
def total(galleons, sickles, knuts):
    return (galleons * 17 + sickles) * 29 + knuts


coins = [100, 50, 25]

print(total(*coins), "Knuts")
``` 
- æ³¨æ„ * å¦‚ä½•å±•å¼€ç¡¬å¸åˆ—è¡¨çš„åºåˆ—ï¼Œå¹¶å°†æ¯ä¸ªå•ç‹¬çš„å…ƒç´ ä¼ é€’ç»™ total ã€‚  


- å‡è®¾æˆ‘ä»¬å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¾“å…¥è´§å¸åç§°ï¼Ÿåœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š
```python
def total(galleons, sickles, knuts):
    return (galleons * 17 + sickles) * 29 + knuts


print(total(galleons=100, sickles=50, knuts=25), "Knuts")
```
- æ³¨æ„çœ‹ï¼Œè¿™ä¸ªè®¡ç®—ç»“æœä»ç„¶æ˜¯æ­£ç¡®çš„ã€‚


- æåˆ°â€œåç§°â€å’Œâ€œå€¼â€ï¼Œä½ å¯èƒ½å°±ä¼šæƒ³åˆ°å­—å…¸ï¼ä½ å¯ä»¥ç”¨å­—å…¸æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š
```python
def total(galleons, sickles, knuts):
    return (galleons * 17 + sickles) * 29 + knuts


coins = {"galleons": 100, "sickles": 50, "knuts": 25}

print(total(coins["galleons"], coins["sickles"], coins["knuts"]), "Knuts")
```
- è¯·æ³¨æ„ï¼Œè¿™é‡Œæä¾›äº†ä¸€ä¸ªåä¸º coins çš„å­—å…¸ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¸å¦‚â€œgalleonsâ€ï¼ˆå¤§å¸†èˆ¹ï¼‰æˆ–â€œsicklesâ€ï¼ˆè¥¿å¯ï¼‰ä¹‹ç±»çš„é”®æ¥ç´¢å¼•å®ƒã€‚
  

- ç”±äº total å‡½æ•°éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬ä¸èƒ½ä¼ å…¥å­—å…¸ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è§£åŒ…æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œç¼–å†™å¦‚ä¸‹ä»£ç ï¼š
```python
def total(galleons, sickles, knuts):
    return (galleons * 17 + sickles) * 29 + knuts


coins = {"galleons": 100, "sickles": 50, "knuts": 25}

print(total(**coins), "Knuts")
```  

- æ³¨æ„ ** æ˜¯å¦‚ä½•ç”¨äºè§£åŒ…å­—å…¸çš„ã€‚è§£åŒ…å­—å…¸æ—¶ï¼Œå®ƒä¼šåŒæ—¶æä¾›é”®å’Œå€¼ã€‚


- Notice how a * unpacks the sequence of the list of coins and passes in each of its individual elements to total.


```py
def total(galleons, sickles, knuts):
    return (galleons * 17 + sickles) * 29 + knuts

print(total(*[100, 50, 25]), "Knuts")
print(total(**{"galleons":100, "sickles":50, "knuts":25}), "Knuts")
```

---

## args ä¸ kwargs

- args æ˜¯ä½ç½®å‚æ•°ï¼Œä¾‹å¦‚æˆ‘ä»¬æä¾›ç»™ print å‡½æ•°çš„å‚æ•°ï¼Œå¦‚ print("Hello", "World") ã€‚
- kwargs æ˜¯å‘½åå‚æ•°ï¼Œæˆ–ç§°â€œå…³é”®å­—å‚æ•°â€ï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸º print æä¾›çš„å‚æ•°ï¼Œå¦‚ print(end="") ã€‚

```py
def f(*args, **kwargs):
    print("ä½ç½®å‚æ•°:", args)
    print("å‘½åå‚æ•°:", kwargs)

f(100, 50, 25, galleons=100, sickles=50, knuts=25)
```
- å¦‚ä¸Š print æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥è®©å‡½æ•°æ¥å—æ•°é‡æœªçŸ¥çš„ä½ç½®å‚æ•°ï¼Œä¹Ÿå¯ä»¥è®©å‡½æ•°æ¥å—æ•°é‡æœªçŸ¥çš„å…³é”®å­—å‚æ•°ã€‚
- æ³¨æ„æ‰§è¡Œæ­¤ä»£ç åï¼Œè¾“å‡ºç»“æœå°†ä»¥ä½ç½®å‚æ•°çš„å½¢å¼æ‰“å°å‡ºæ¥ã€‚
- æˆ‘ä»¬ç”šè‡³å¯ä»¥ä¼ å…¥å‘½åå‚æ•°ã€‚è¯·æ³¨æ„ï¼Œå‘½åå€¼æ˜¯ä»¥å­—å…¸çš„å½¢å¼æä¾›çš„ã€‚
- æƒ³æƒ³ä¸Šé¢çš„ print å‡½æ•°ï¼Œä½ ä¼šå‘ç° *objects å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„ä½ç½®å‚æ•°ã€‚
- æ‚¨å¯ä»¥åœ¨ Python çš„ print æ–‡æ¡£ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚ https://docs.python.org/3/library/functions.html#print

---

## map æ˜ å°„

- å¦‚æœèƒ½å–Šå‡ºä¸€é•¿ä¸²æ— é™æ•°é‡çš„å•è¯å²‚ä¸æ˜¯å¾ˆæ£’ï¼Ÿ
```python
def main():
    yell(["This", "is", "CS50"])


def yell(words):
    uppercased = []
    for word in words:
        uppercased.append(word.upper())
    print(*uppercased)


if __name__ == "__main__":
    main()
```
- æ³¨æ„ï¼Œæˆ‘ä»¬éå†æ¯ä¸ªå•è¯å¹¶å°†å…¶è½¬æ¢ä¸ºå¤§å†™ï¼Œä»è€Œç´¯ç§¯æ‰€æœ‰å¤§å†™å•è¯ã€‚ç„¶åä½¿ç”¨æ˜Ÿ * è§£åŒ…æ‰“å°å‡ºå¤§å†™åˆ—è¡¨ã€‚


- å»æ‰æ‹¬å·åï¼Œæˆ‘ä»¬å¯ä»¥å°†å•è¯ä½œä¸ºå‚æ•°ä¼ é€’

```py
def main():
    yell("This", "is", "CS50")


def yell(*words):
    uppercased = []
    for word in words:
        uppercased.append(word.upper())
    print(*uppercased)


if __name__ == "__main__":
    main()
```
- æ³¨æ„ *words å…è®¸å‡½æ•°æ¥å—å¤šä¸ªå‚æ•°ã€‚


- map å…è®¸ä½ å°†ä¸€ä¸ªå‡½æ•°æ˜ å°„åˆ°ä¸€ç³»åˆ—å€¼ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç¼–å†™ä»£ç ï¼š
```python
def main():
    yell("This", "is", "CS50")


def yell(*words):
    uppercased = map(str.upper, words)
    print(*uppercased)


if __name__ == "__main__":
    main()
```
- æ³¨æ„ map æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚é¦–å…ˆï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬è¦å°†å…¶åº”ç”¨äºåˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚å…¶æ¬¡ï¼Œå®ƒæ¥å—åˆ—è¡¨æœ¬èº«ï¼Œæˆ‘ä»¬å°†å¯¹åˆ—è¡¨åº”ç”¨ä¸Šè¿°å‡½æ•°ã€‚å› æ­¤ï¼Œ words ä¸­çš„æ‰€æœ‰å•è¯éƒ½å°†è¢«ä¼ é€’ç»™ str.upper å‡½æ•°ï¼Œå¹¶è¿”å›ç»™ uppercased å‡½æ•°ã€‚


- æ‚¨å¯ä»¥åœ¨ Python çš„ map æ–‡æ¡£ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚ https://docs.python.org/3/library/functions.html#map


---

## åˆ—è¡¨æ¨å¯¼å¼
- åˆ—è¡¨æ¨å¯¼å¼å…è®¸æ‚¨ä½¿ç”¨ç®€æ´çš„ä¸€è¡Œä»£ç å¿«é€Ÿåˆ›å»ºåˆ—è¡¨ã€‚

```py
def main():
    yell("This", "is", "CS50")


def yell(*words):
    uppercased = [arg.upper() for arg in words]
    print(*uppercased)


if __name__ == "__main__":
    main()

```
- æ³¨æ„ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ map ï¼Œè€Œæ˜¯ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥ç¼–å†™äº†ä¸€ä¸ª Python è¡¨è¾¾å¼ã€‚å¯¹äºæ¯ä¸ªå‚æ•°ï¼Œéƒ½ä¼šåº”ç”¨ .upper ã€‚


- è¿›ä¸€æ­¥æ¢è®¨è¿™ä¸ªæ¦‚å¿µï¼Œè®©æˆ‘ä»¬è½¬å‘å¦ä¸€ä¸ªé¡¹ç›®ã€‚
ç­›é€‰ï¼š
```py
students = [
    {"name": "Hermione", "house": "Gryffindor"},
    {"name": "Harry", "house": "Gryffindor"},
    {"name": "Ron", "house": "Gryffindor"},
    {"name": "Draco", "house": "Slytherin"},
]

gryffindors = []
for student in students:
    if student["house"] == "Gryffindor":
        gryffindors.append(student["name"])

for gryffindor in sorted(gryffindors):
    print(gryffindor)
```
- æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºåˆ—è¡¨æ—¶ä½¿ç”¨äº†æ¡ä»¶åˆ¤æ–­ã€‚ å¦‚æœå­¦ç”Ÿçš„å­¦é™¢æ˜¯æ ¼å…°èŠ¬å¤šï¼Œæˆ‘ä»¬å°±å°†è¯¥å­¦ç”Ÿæ·»åŠ åˆ°åå•ä¸­ã€‚æœ€åï¼Œæˆ‘ä»¬æ‰“å°å‡ºæ‰€æœ‰å­¦ç”Ÿçš„åå­—ã€‚


- æ›´ä¼˜é›…çš„åšæ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ç®€åŒ–è¿™æ®µä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
```python
students = [
    {"name": "Hermione", "house": "Gryffindor"},
    {"name": "Harry", "house": "Gryffindor"},
    {"name": "Ron", "house": "Gryffindor"},
    {"name": "Draco", "house": "Slytherin"},
]

gryffindors = [
    student["name"] for student in students if student["house"] == "Gryffindor"
]

for gryffindor in sorted(gryffindors):
    print(gryffindor)
```
- æ³¨æ„åˆ—è¡¨æ¨å¯¼å¼æ˜¯åœ¨ä¸€è¡Œå†…å®Œæˆçš„ï¼


---

## filter è¿‡æ»¤

- ä½¿ç”¨ Python çš„ filter å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿”å›æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„åºåˆ—å­é›†ã€‚
- åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çª—å£ä¸­ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š


```py
students = [
    {"name": "Hermione", "house": "Gryffindor"},
    {"name": "Harry", "house": "Gryffindor"},
    {"name": "Ron", "house": "Gryffindor"},
    {"name": "Draco", "house": "Slytherin"},
]

def is_gryffindor(s): 
    return s["house"] == "Gryffindor" # True or False

gryffindors = filter(is_gryffindor, students)

# Lambda version
gryffindors = filter(lambda s: s["house"] == "Gryffindor", students)


for g in sorted(gryffindors, key=lambda s: s["name"]):
    print(g["name"])
```

- æ³¨æ„æˆ‘ä»¬æ˜¯å¦‚ä½•åˆ›å»ºåä¸º is_gryffindor çš„å‡½æ•°çš„ã€‚è¿™æ˜¯ä¸€ä¸ªç­›é€‰å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå­¦ç”Ÿ s ï¼Œå¹¶æ ¹æ®è¯¥å­¦ç”Ÿæ˜¯å¦å±äºæ ¼å…°èŠ¬å¤šå­¦é™¢è¿”å› True æˆ– ` False ã€‚
- å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ–°çš„ filter å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚é¦–å…ˆï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åº”ç”¨äºåºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ â€”â€”åœ¨æœ¬ä¾‹ä¸­ä¸º is_gryffindor ã€‚å…¶æ¬¡ï¼Œå®ƒæ¥å—ä¸€ä¸ªåºåˆ—ï¼Œè¯¥åºåˆ—å°†åº”ç”¨ç­›é€‰å‡½æ•°â€”â€”åœ¨æœ¬ä¾‹ä¸­ä¸º students ã€‚åœ¨ gryffindors ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥åªçœ‹åˆ°æ ¼å…°èŠ¬å¤šå­¦é™¢çš„å­¦ç”Ÿã€‚
- filter è¿˜å¯ä»¥ä½¿ç”¨ lambda å‡½æ•°
- è¯·æ³¨æ„ï¼Œæä¾›çš„å­¦ç”Ÿåå•æ˜¯ä¸€æ ·çš„ã€‚
- æ‚¨å¯ä»¥åœ¨ Python çš„ filter æ–‡æ¡£ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚https://docs.python.org/3/library/functions.html#filter
---

## å­—å…¸æ¨å¯¼å¼
- æˆ‘ä»¬å¯ä»¥å°†åˆ—è¡¨æ¨å¯¼å¼èƒŒåçš„æ€æƒ³åº”ç”¨åˆ°å­—å…¸ä¸­ã€‚
- ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ä»£ç æ¥åº”ç”¨å­—å…¸æ¨å¯¼å¼

```py
students = ["Hermione", "Harry", "Ron"]

gryffindors = [{"name": student, "house": "Gryffindor"} for student in students]
print(gryffindors)

# Or a mapping
gryffindors = {student: "Gryffindor" for student in students}
print(gryffindors)
```
- è¯·æ³¨æ„ï¼Œä¹‹å‰çš„æ‰€æœ‰ä»£ç éƒ½ç®€åŒ–ä¸ºä¸€è¡Œï¼Œå…¶ä¸­ä¸º students ä¸­çš„æ¯ä¸ª student æä¾›äº†å­—å…¸çš„ç»“æ„ã€‚
- æ³¨æ„å­—å…¸å°†å¦‚ä½•ç”¨é”®å€¼å¯¹æ„å»ºã€‚
---

## enumerate æšä¸¾

- æˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹æ¯ä½å­¦ç”Ÿè¿›è¡Œæ’åã€‚
```python
students = ["Hermione", "Harry", "Ron"]

for i in range(len(students)):
    print(i + 1, students[i])
```
- æ³¨æ„è¿è¡Œæ­¤ä»£ç æ—¶å¦‚ä½•æšä¸¾æ¯ä¸ªå­¦ç”Ÿã€‚


- åˆ©ç”¨æšä¸¾ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼š
```py
students = ["Hermione", "Harry", "Ron"]

for i, student in enumerate(students):
    print(i + 1, student)
```
- æ³¨æ„ enumerate å¦‚ä½•æ˜¾ç¤ºæ¯ä¸ª student çš„ç´¢å¼•å’Œå€¼ã€‚
- æ‚¨å¯ä»¥åœ¨ Python çš„ enumerate æ–‡æ¡£ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚

---

## ç”Ÿæˆå™¨ä¸è¿­ä»£å™¨

- **ç”Ÿæˆå™¨**é€šè¿‡ `yield` é€ä¸ªäº§ç”Ÿå€¼ï¼Œ<mark>å†…å­˜å ç”¨æ’å®š</mark>ã€‚

```py
def sheep(n):
    for i in range(n):
        yield "ğŸ‘" * i

def main():
    n = int(input("what's n? "))
    for s in sheep(n):
        print(s)
```

---

## æ­å–œï¼

ä½ å·²æŒæ¡ï¼šå‡½æ•°ä¸å˜é‡ã€æ¡ä»¶ã€å¾ªç¯ã€å¼‚å¸¸ã€åº“ã€å•å…ƒæµ‹è¯•ã€æ–‡ä»¶ I/Oã€æ­£åˆ™è¡¨è¾¾å¼ã€é¢å‘å¯¹è±¡ï¼Œä»¥åŠæœ¬è®²çš„ä¸€ç³»åˆ—å®ç”¨å·¥å…·ï¼ˆé›†åˆã€ç±»å‹ã€è§£æã€ç”Ÿæˆå™¨ç­‰ï¼‰ã€‚

---

## This was CS50!

```py
import cowsay
import pyttsx3

engine = pyttsx3.init()
this = input("what's this? ")
cowsay.cow(this)
engine.say(this)
engine.runAndWait()
```

> æœŸå¾…ä½ æŠŠè¿™äº›çŸ¥è¯†ç”¨äºè§£å†³çœŸå®é—®é¢˜ï¼Œè®©ä¸–ç•Œæ›´å¥½ã€‚**This was CS50!**
