# Lecture 8 â€” é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆREADMEï¼Œä¸­æ–‡ï¼‰

> ä¾æ®æˆªå›¾æ•´ç†çš„**ç¬¬ 8 è®²**è¦ç‚¹ï¼›åŒ…å« *æ–œä½“*ã€**åŠ ç²—** ä¸ <mark>é«˜äº®</mark> å¼ºè°ƒã€‚

## ç›®å½•
- [é¢å‘å¯¹è±¡ç¼–ç¨‹ç®€ä»‹](#é¢å‘å¯¹è±¡ç¼–ç¨‹ç®€ä»‹)
- [ç±»ï¼ˆClassesï¼‰](#ç±»classes)
- [`raise` ä¸å¼‚å¸¸](#raise-ä¸å¼‚å¸¸)
- [è£…é¥°å™¨ / å±æ€§ï¼ˆ@propertyï¼‰](#è£…é¥°å™¨--å±æ€§property)
- [ä¸ä»¥å¾€å†…å®¹çš„è¿æ¥](#ä¸ä»¥å¾€å†…å®¹çš„è¿æ¥)
- [ç±»æ–¹æ³•](#ç±»æ–¹æ³•)
- [é™æ€æ–¹æ³•](#é™æ€æ–¹æ³•)
- [ç»§æ‰¿](#ç»§æ‰¿)
- [ç»§æ‰¿ä¸å¼‚å¸¸å±‚çº§](#ç»§æ‰¿ä¸å¼‚å¸¸å±‚çº§)
- [è¿ç®—ç¬¦é‡è½½](#è¿ç®—ç¬¦é‡è½½)
- [æ€»ç»“](#æ€»ç»“)

---

## é¢å‘å¯¹è±¡ç¼–ç¨‹ç®€ä»‹
- ä¹‹å‰å¤šä¸º**è¿‡ç¨‹å¼**å†™æ³•ï¼›OOP å°†**æ•°æ®+è¡Œä¸º**å°è£…åœ¨ä¸€èµ·ï¼Œæ›´æ˜“ç»´æŠ¤å¹¶å¯â€œé˜²å¾¡å¼ç¼–ç¨‹â€ã€‚
- ä»è¿‡ç¨‹å¼ â†’ å‡½æ•°æŠ½è±¡ â†’ å­—å…¸ â†’ **ç±»** é€æ­¥æ¼”è¿›ã€‚

### è¿‡ç¨‹å¼èµ·ç‚¹
```py
name = input("Name: ")
house = input("House: ")
print(f"{name} from {house}")
```

### æŠ½è±¡è¾“å…¥è¾“å‡º
```py
def main():
    name = get_name()
    house = get_house()
    print(f"{name} from {house}")

def get_name():  return input("Name: ")
def get_house(): return input("House: ")

if __name__ == "__main__":
    main()
```

### å¤šè¿”å›å€¼ï¼ˆtupleï¼‰
```py
def get_student():
    return input("Name: "), input("House: ")  # å…ƒç»„ï¼Œ**ä¸å¯å˜**
```

### åˆ—è¡¨/å­—å…¸ç‰ˆæœ¬
```py
def get_student():  # åˆ—è¡¨ï¼Œå¯å˜
    return [input("Name: "), input("House: ")]

def get_student():  # å­—å…¸ï¼Œè¯­ä¹‰æ›´æ¸…æ™°
    return {"name": input("Name: "), "house": input("House: ")}
```

<mark>ä¸ºä»€ä¹ˆç”¨ç±»ï¼Ÿ</mark> è‡ªå®šä¹‰**ç±»å‹**ï¼Œé›†ä¸­**æ ¡éªŒ**ä¸**æ–¹æ³•**ï¼Œæ›´å®‰å…¨å¯è¯»ã€‚

---

## ç±»ï¼ˆClassesï¼‰
```py
class Student:
    ...
```
- é¦–å…ˆç”¨å±æ€§ä¿å­˜æ•°æ®ï¼Œç„¶ååŠ å…¥æ„é€ å™¨ `__init__` ä¸æ˜“è¯»è¾“å‡º `__str__`ï¼š
```py
class Student:
    def __init__(self, name, house):
        self.name, self.house = name, house
    def __str__(self):
        return f"{self.name} from {self.house}"
```

---

## `raise` ä¸å¼‚å¸¸
- åœ¨ç±»å†…éƒ¨é›†ä¸­**æ ¡éªŒ**å¹¶åœ¨éæ³•æ—¶ **raise**ï¼š
```py
class Student:
    def __init__(self, name, house):
        if not name:
            raise ValueError("Missing name")
        if house not in ["Gryffindor","Hufflepuff","Ravenclaw","Slytherin"]:
            raise ValueError("Invalid house")
        self.name, self.house = name, house
```
- å¯æ‰©å±•è¡Œä¸ºï¼š
```py
class Student:
    def __init__(self, name, house, patronus=None):
        ...
    def charm(self):
        match self.patronus:
            case "Stag": return "ğŸ¦Œ"
            case "Otter": return "ğŸ¦¦"
            case "Jack Russell terrier": return "ğŸ•"
            case _: return "âœ¨"
```

---

## è£…é¥°å™¨ / å±æ€§ï¼ˆ`@property`ï¼‰
- é€šè¿‡ **`@property`** + ç§æœ‰å­—æ®µå¦‚ `_house`ï¼Œå®ç°â€œç‚¹è¯­æ³•è®¿é—®ã€èµ‹å€¼å³æ ¡éªŒâ€ã€‚
```py
class Student:
    def __init__(self, name, house):
        if not name: raise ValueError("Invalid name")
        self._name = name
        self.house = house  # è§¦å‘ setter

    @property
    def name(self): return self._name
    @name.setter
    def name(self, v):
        if not v: raise ValueError("Invalid name")
        self._name = v

    @property
    def house(self): return self._house
    @house.setter
    def house(self, v):
        if v not in {"Gryffindor","Hufflepuff","Ravenclaw","Slytherin"}:
            raise ValueError("Invalid house")
        self._house = v
```
<mark>ç»éªŒï¼š</mark> åªåœ¨**æ„é€ å™¨/Setter**æ ¡éªŒä¸€æ¬¡ï¼Œå…¶ä»–åœ°æ–¹é‡ç”¨å³å¯ã€‚

---

## ä¸ä»¥å¾€å†…å®¹çš„è¿æ¥
ä½ æ—©å·²åœ¨ä½¿ç”¨ç±»ï¼š`int`ã€`str`ã€`list`ã€`dict`ï¼š
```py
print(type(50)), print(type("hi")), print(type([1])), print(type({"a":1}))
```

---

## ç±»æ–¹æ³•
**`@classmethod`** ä½œç”¨äºâ€œç±»æœ¬èº«â€ï¼Œå¯ä½œ**å¤‡ç”¨æ„é€ å™¨**ï¼š
```py
import random
class Hat:
    houses = ["Gryffindor","Hufflepuff","Ravenclaw","Slytherin"]
    @classmethod
    def sort(cls, name):
        print(name, "is in", random.choice(cls.houses))
```
```py
class Student:
    ...
    @classmethod
    def get(cls):
        return cls(input("Name: "), input("House: "))
```

---

## é™æ€æ–¹æ³•
**`@staticmethod`**ï¼šä¸å®ä¾‹ã€ç±»çŠ¶æ€éƒ½æ— å…³çš„å·¥å…·å‡½æ•°ï¼Œæ”¾åˆ°ç±»å‘½åç©ºé—´ä¸­ã€‚

---

## ç»§æ‰¿
```py
class Wizard:
    def __init__(self, name):
        if not name: raise ValueError("Missing name")
        self.name = name

class Student(Wizard):
    def __init__(self, name, house):
        super().__init__(name)
        self.house = house

class Professor(Wizard):
    def __init__(self, name, subject):
        super().__init__(name)
        self.subject = subject
```

---

## ç»§æ‰¿ä¸å¼‚å¸¸å±‚çº§
- å¼‚å¸¸æ˜¯**æ ‘å½¢ç»“æ„**ï¼›æ•è·çˆ¶ç±»å¯ç»Ÿä¸€å¤„ç†å­ç±»ï¼ˆå¦‚ `Exception` æ•è· `ValueError` ç­‰ï¼‰ã€‚

---

## è¿ç®—ç¬¦é‡è½½
é€šè¿‡ **dunder** æ–¹æ³•èµ‹äºˆç±»å‹æ›´å¤šè¯­ä¹‰ï¼š
```py
class Vault:
    def __init__(self, g=0, s=0, k=0):
        self.galleons, self.sickles, self.knuts = g, s, k
    def __str__(self):
        return f"{self.galleons} Galleons, {self.sickles} Sickles, {self.knuts} Knuts"
    def __add__(self, other):
        return Vault(self.galleons+other.galleons,
                     self.sickles+other.sickles,
                     self.knuts+other.knuts)
```

---

## æ€»ç»“
- <mark>æ ¸å¿ƒèƒ½åŠ›ï¼š</mark> **OOPã€ç±»ã€`raise`ã€`@property`ã€ç±»/é™æ€æ–¹æ³•ã€ç»§æ‰¿ã€è¿ç®—ç¬¦é‡è½½**ã€‚  
- **å®è·µå»ºè®®ï¼š** å°†æ ¡éªŒæ”¶æ•›åˆ°ç±»å†…éƒ¨ï¼›ç”¨å±æ€§æš´éœ²å®‰å…¨çŠ¶æ€ï¼›ä¿æŒä¸å˜å¼æ¸…æ™°ï¼›é€‚åº¦é‡è½½è¿ç®—ç¬¦ã€‚
