# 使用 Python 创建代码

- VS Code 是一个文本编辑器。除了编辑文本之外，您还可以在终端上直观地浏览文件并运行基于文本的命令。  

- 在终端中，您可以执行 `code hello.py` 来开始编码。  

- 在上面的文本编辑器中，您可以输入 `print("hello, world")`。这是一个著名的经典程序，几乎所有程序员在学习过程中都会写。  

- 在终端窗口中，您可以执行命令。要运行此程序，您需要将光标移动到屏幕底部，并在终端窗口中单击。现在，您可以在终端窗口中输入第二个命令。在美元符号旁边，输入 `python hello.py`，然后按下键盘上的 Enter 键。  

- 回想一下，计算机实际上只能理解 0 和 1。因此，当你运行 `python hello.py` 时，Python 会解释你在 `hello.py` 中创建的文本，并将其翻译成计算机可以理解的 0 和 1。  

- 运行 `python hello.py` 程序的结果是 `hello, world`。  

- 恭喜！您刚刚创建了您的第一个程序。  

--- 

# 功能

- *函数* 是计算机或计算机语言已经知道如何执行的动作。  
- 在您的 `hello.py` 程序中，**`print` 函数** 知道如何打印到终端窗口。  
- **`print` 函数接受参数**。在本例中，`"hello, world"` 是 `print` 函数接受的参数。  

---

# 错误

- 在编程过程中出现 *Bug 是很正常的*。这些都是错误，是需要你解决的问题！  
  **不要灰心！** 这是成为优秀程序员过程中不可或缺的一部分。  

- 想象一下，在我们的 `hello.py` 程序中，我们不小心输入了：  

  ```python
  print("hello, world"（忘记了 print 函数最后的 )）。
 - 如果你犯了这个错误，解释器就会在终端窗口输出 **一个错误**！

- 错误信息 通常可以 告诉你错误所在，并提供修复错误的线索。然而，很多时候解释器并没有这么有用。
  
---

# 改进你的第一个 Python 程序

- 我们可以让你的第一个 Python 程序更加 *个性化*。  

- 在 `hello.py` 文件中，我们可以加入另一个函数。**`input`** 是一个接受提示作为参数的函数。我们可以将代码修改为：

```python
input("What's your name? ")
print("hello, world")
```

- 但是，仅凭这一处修改并不能让程序输出用户输入的内容。为此，我们需要向你介绍 **<mark>变量</mark>**。  

---

# 变量

- *变量* 就是程序中的一个容器，用于存储一个值。  

- 在程序中，你可以引入自己的变量，例如：

```python
name = input("What's your name? ")
print("hello, world")
```

- 注意，中间的等号 **`=`** 在 `name = input("What's your name? ")` 中在编程里有 **特殊作用**。这个等号表示将右边的值赋给左边。因此，`input("What's your name? ")` 返回的值被赋给 **<mark>name</mark>**。  

- 如果你将代码修改为如下形式，你会发现一个 *意外的结果*：

```python
name = input("What's your name? ")
print("hello, name")
```

- 无论用户输入什么，程序都会在终端窗口输出 `hello, name`。  

- 进一步修改代码，你可以这样写：

```python
name = input("What's your name? ")
print("hello,")
print(name)
```

- 终端窗口中的结果将是：

```text
What's your name? David
hello
David
```

- 我们离预期的结果更近了！🎉  
- 你可以在 Python 官方文档了解更多 **数据类型**：https://docs.python.org/3/library/stdtypes.html

---
# 注释

- **注释** 是程序员在程序中 *记录自己正在做的事情* 的方式，也可以告诉他人某段代码的意图。简单来说，注释是写给自己和他人看的笔记！
- 你可以在程序中加入注释来说明程序正在做什么。示例：

```python
# 询问用户的名字
name = input("What's your name? ")
print("hello,")
print(name)
```

- 注释也可以作为你的 *待办事项清单*。

---

# 伪代码

- **伪代码** 是一种 *重要的注释形式*，常被当作待办清单，尤其是在你还不知道如何完成某个编码任务时。
- 例如，代码可以写成：

```python
# 询问用户的名字
name = input("What's your name? ")

# 打印 hello
print("hello,")

# 打印输入的名字
print(name)
```

---

# 进一步改进你的第一个 Python 程序

- 我们可以继续如下改进（字符串拼接）：

```python
# 询问用户的名字
name = input("What's your name? ")

# 打印 hello 和输入的名字
print("hello, " + name)
```

- 事实上，有些函数可以接受多个参数。
- 我们可以使用 **逗号 <mark>,</mark>** 来传入 *多个参数*，示例：

```python
# 询问用户的名字
name = input("What's your name? ")

# 打印 hello 和输入的名字
print("hello,", name)
```

- 在终端中，如果输入 **"David"**，输出结果是：

```text
hello, David
```

**<mark>成功！</mark> 🎉**

---

# 字符串与参数

- 在 Python 中，字符串（**`str`**）是*一段文本序列*。
- 回到之前的代码，我们看到一个视觉副作用：结果分成多行显示：

```python
# 询问用户的名字
name = input("What's your name? ")
print("hello,")
print(name)
```

- 函数可以接收**参数**来影响其行为。根据 **`print`** 的文档，它默认带有参数 **`end='\n'`**，其中 `\n` 表示换行。____________
- 不过我们可以自己提供 **`end`** 参数，从而*不*自动换行：

```python
# 询问用户的名字
name = input("What's your name? ")
print("hello,", end="")
print(name)
```

- 通过 **`end=""`**，输出会变成同一行：`hello, David`。  
- “参数”就是函数可以接收的值。更多见 **`print`** 文档：https://docs.python.org/3/library/functions.html#print

---
# 引号的一个小问题

- 请注意，在字符串中加入引号是*有挑战性的*。

- **<mark>`print("hello,"friend"")`</mark>** 将不起作用，并且解释器会抛出错误。

- 一般来说，有两种解决方式：  
  1. 直接把引号改为 **单引号**。  
  2. 更常见的方法是使用反斜杠对引号进行转义：

```python
print("hello, \"friend\"")
```

- 反斜杠告诉解释器，后面的字符应被视为字符串中的一部分，而不是结束符。  
- 这样，解释器就不会报错。
---
# 字符串格式化

- 这里最优雅的方式是使用 **f-string**：

```python
# 询问用户的名字
name = input("What's your name? ")
print(f"hello, {name}")
```

- 注意 `print(f"hello, {name}")` 中的 **<mark>f</mark>**，它告诉 Python 要对字符串进行*格式化*并替换 `{…}` 内的表达式。

---

# 更多字符串技巧

- 不要指望用户总是“乖乖配合”，要对输入进行*校验或清理*。
- 使用 **`strip()`** 可以移除两端空白：

```python
name = input("What's your name? ")
name = name.strip()
print(f"hello, {name}")
```

- 用 **`title()`** 可以把每个单词的首字母大写：

```python
name = input("What's your name? ")
name = name.strip()
name = name.title()
print(f"hello, {name}")
```

- 也可以**链式调用**提高效率：

```python
name = input("What's your name? ").strip().title()
print(f"hello, {name}")
```

- 更多内容见 **`str`** 文档：https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str

---

# 整数（int）

- 在 Python 中，整数类型是 **`int`**。
- 数学里我们熟悉 `+ - * / %` 等运算符。
- 你可以在终端使用 REPL（`>>>`）直接运行代码，但我们通常在文件里编写。
- 在终端中新建文件 `calculator.py` 并写入：

```python
x = 1
y = 2

z = x + y

print(z)
```

- 运行 `python calculator.py` 会输出 `3`。让它更互动：

```python
x = input("What's x? ")
y = input("What's y? ")

z = x + y

print(z)
```

- 输出为 `12`，不正确，因为 **`+`** 连接的是两个字符串。我们需要将输入转换为整数：

```python
x = input("What's x? ")
y = input("What's y? ")

z = int(x) + int(y)

print(z)
```

- 这叫做*类型转换*（casting）。进一步优化（嵌套调用 `input` 与 `int`）：

```python
x = int(input("What's x? "))
y = int(input("What's y? "))

print(x + y)
```

- 先执行 `input`，再执行 `int`。更多见 **`int`** 文档：https://docs.python.org/3/library/functions.html#int

---

# 可读性至上

- 无论采用哪种实现方式，代码必须 **易读**。通过注释为自己和他人提供线索，写出清晰、可维护的代码。

---

# 浮点基础（float）

- **float** 表示带小数点的实数，例如 `0.52`。
- 支持浮点数：

```python
x = float(input("What's x? "))
y = float(input("What's y? "))

print(x + y)
```

- 输入 `1.2` 和 `3.4`，输出 `4.6`。

- 取整或四舍五入（`round(number[, ndigits])`）：

```python
x = float(input("What's x? "))
y = float(input("What's y? "))

z = round(x + y)
print(z)
```

- 大数字加千分位：

```python
x = float(input("What's x? "))
y = float(input("What's y? "))

z = round(x + y)
print(f"{z:,}")
```

---

# 更多浮点技巧

- 除法可能得到很多小数位：

```python
x = float(input("What's x? "))
y = float(input("What's y? "))

z = x / y
print(z)
```

- 保留两位小数（两种方式）：

```python
# round
x = float(input("What's x? "))
y = float(input("What's y? "))
z = round(x / y, 2)
print(z)

# f-string
x = float(input("What's x? "))
y = float(input("What's y? "))
z = x / y
print(f"{z:.2f}")
```

- 更多见 **`float`** 文档：https://docs.python.org/3/library/functions.html#float

---

# Def（自定义函数）

- 让我们来创建自己的函数。
- 先从零开始，然后逐步抽取函数：

```python
name = input("What's your name? ").strip().title()
hello()
print(name)
```

- 这会报错，因为 `hello` 尚未定义。定义它：

```python
def hello():
    print("hello")

name = input("What's your name? ")
hello()
print(name)
```

- 函数体中的代码需要**缩进**。进一步让函数接收参数：

```python
def hello(to):
    print("hello,", to)

name = input("What's your name? ")
hello(name)
```
- 请注意， def hello() 下的所有内容都已缩进。Python 是一种缩进语言。它使用缩进来理解哪些内容属于上述函数的一部分。因此， hello 函数中的所有内容都必须缩进。如果某些内容未缩进，则会将其视为不在 hello 函数内。在终端窗口中运行 python hello.py ，您会发现输出可能与您预期的并不完全一致。



- 增加**默认参数**：

```python
def hello(to="world"):
    print("hello,", to)

name = input("What's your name? ")
hello(name)
hello()  # 不传参，默认输出 hello, world
```

- 使用 **`main`** 来组织：

```python
def main():
    name = input("What's your name? ")
    hello(name)
    hello()

def hello(to="world"):
    print("hello,", to)

main()
```

---

# 返回值
- 你可以想象很多场景，你不仅希望函数执行某个操作，还希望它能将值返回给主函数。例如，你可能希望函数不仅仅是打印 x + y 的计算结果，而是将此计算结果返回给程序的其他部分。这种“返回”值的行为我们称之为 return 值。
- 有时我们希望函数 *返回* 值而不是只打印：

```python
def main():
    x = int(input("What's x? "))
    print("x squared is", square(x))

def square(n):
    return n * n

main()
```

- 这里 `x` 被传入 **`square`**，`x * x` 的结果被返回给 `main`。

---

# 总结

在本讲中你学习了：

- 第一个 Python 程序的构建  
- 函数与 <mark>参数</mark>  
- Bug、变量、注释与伪代码  
- 字符串与格式化（f-string）  
- 整数与浮点数  
- <mark>可读性</mark> 原则  
- 自定义函数与返回值


